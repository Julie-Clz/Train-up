<div class="cont">
  <div class="title-index">
    <h1>Trouve ton coach!</h1>
  </div>

  <%= form_tag skills_path, method: :get do %>
    <div class="d-flex flex-row justify-content-between align-items-center">
      <div class="justify-content-between flex-grow">
        <%= select_tag "skill_name", options_for_select(Skill.pluck(:name, :id), params[:skill_name]), class: "filters", prompt: 'Compétence' %>
        <%= select_tag "sport_id", options_for_select(Sport.pluck(:name, :id), params[:sport_id]), class: "filters", prompt: 'Sport' %>
        <%= select_tag "specialty", options_for_select(Experience.pluck(:specialty), params[:specialty]), class: "filters", prompt: 'Spécialité' %>
        <%= text_field_tag "skill_location", '', size: 25, class: "filters", placeholder: "Adresse"%>
      </div>
      <div class="exp flex-column">
        <label for="customRange2", class= "label-exp">Expérience</label>
        <%= range_field_tag "exp_years", 0, min: 0, max: 5, class: "custom-range"%>
          <div class="d-flex flex-row justify-content-between">
            <label for="min" class="pull-left">0</label>
            <label for="max" class="pull-right">5 +</label>
          </div>
      </div>
      <div class="exp flex-column">
        <label for="customRange2", class= "label-exp">Prix</label>
        <%= range_field_tag "exp_price", 10, min: 30, max: 100, class: "custom-range"%>
        <div class="d-flex flex-row justify-content-between">
          <label for="min" class="pull-left">30</label>
          <label for="max" class="pull-right">100</label>
        </div>
      </div>
    <div>
      <%= submit_tag "Rechercher", class: "btn btn-primary" %>
    </div>
  </div>
   <% end %>

<div class="cards-map d-flex justify-content-between">
  <div class="container-cards">
  <% @skills.each do |skill| %>
    <div class="card-product">
      <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/skateboard.jpg" />
      <div class="card-product-infos">
        <h2><%= skill.user.first_name.capitalize %> <%= skill.user.last_name.capitalize %></h2>
        <h1><%= skill.name.capitalize %></h1>
        <% skill.experiences.each do |experience| %>
          <% if experience.specialty.nil? %>
            <h2><%= experience.sport.name.capitalize %> : <%= experience.years %> années d'expérience</h2>
          <% else %>
            <h2><%= experience.sport.name.capitalize %>, <%= experience.specialty.capitalize %> : <%= experience.years %> années d'expérience</h2>
          <% end %>
        <% end %>
        <p><%= skill.location.capitalize %></p>
      </div>
    </div> 
  <% end %>
</div>
<div id="map"
   style="width: 800px; height: 600px;"
   data-markers="<%= @markers.to_json %>"
   data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
</div>
</div>


</div>
